<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Spotify Song Info</title>
  <style>
    body { 
      font-family: Arial, sans-serif; 
      padding: 20px; 
      background: linear-gradient(135deg, #1DB954, #191414); 
      display: flex; 
      justify-content: center; 
      align-items: center; 
      flex-direction: column; 
      min-height: 100vh; 
      margin: 0;
      color: #fff;
    }
    input, button {
      padding: 10px; 
      margin: 5px 0; 
      width: 100%; 
      max-width: 400px; 
      border: none;
      border-radius: 5px;
      box-sizing: border-box;
    }
    input {
      outline: none;
    }
    button {
      background: #1DB954; 
      color: white; 
      cursor: pointer;
      transition: background 0.3s;
    }
    button:hover {
      background: #1ed760;
    }
    #songInfo {
      background: rgba(0, 0, 0, 0.7);
      padding: 20px;
      border-radius: 10px;
      margin-top: 20px;
      text-align: center;
      max-width: 400px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.5);
    }
    #songInfo img {
      margin-top: 10px; 
      border-radius: 10px; 
      max-width: 100%;
    }
    .download-btn {
      display: inline-block; 
      margin-top: 15px; 
      padding: 10px 20px; 
      background: #1DB954; 
      color: white; 
      text-decoration: none; 
      border-radius: 5px; 
      transition: background 0.3s;
    }
    .download-btn:hover {
      background: #1ed760;
    }
    .no-preview {
      color: #ff4d4d;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <h2>Spotify Song Info Fetcher</h2>
  <input type="text" id="songLink" placeholder="Enter Spotify song link here" />
  <button id="getSong">Get Song Info</button>
  <div id="songInfo"></div>

  <script>
    document.getElementById("getSong").addEventListener("click", function() {
      const link = document.getElementById("songLink").value;
      let trackIdMatch = link.match(/track\/(\w+)/);
      if (!trackIdMatch) {
        alert("Invalid Spotify link");
        return;
      }
      let trackId = trackIdMatch[1];

      // Show loading message
      document.getElementById("songInfo").innerHTML = "<p>Loading...</p>";

      fetch(`https://spotify23.p.rapidapi.com/tracks/?ids=${trackId}`, {
        method: 'GET',
        headers: {
          'X-RapidAPI-Key': '09fc2b92d1msh1300da4dbc8173fp1936a7jsn30645819a75c',
          'X-RapidAPI-Host': 'spotify23.p.rapidapi.com'
        }
      })
      .then(response => response.json())
      .then(data => {
        const track = data.tracks[0];
        let html = `
          <h3>${track.name} - ${track.artists[0].name}</h3>
          <img src="${track.album.images[0].url}" alt="Album cover" />
        `;
        if (track.preview_url) {
          html += `<a class="download-btn" href="${track.preview_url}" target="_blank" download>Download 30-sec Preview</a>`;
        } else {
          html += `<p class="no-preview">No preview available.</p>`;
        }
        document.getElementById("songInfo").innerHTML = html;
      })
      .catch(err => {
        console.error(err);
        alert("Failed to fetch song info. Check your API key and link.");
        document.getElementById("songInfo").innerHTML = "";
      });
    });
  </script>
</body>
</html>
